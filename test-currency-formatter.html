<!DOCTYPE html>
<html>
<head>
    <title>Test Currency Formatter</title>
    <script type="module">
        // Import the formatter
        import { createExcelFormatter } from './src/components/datatable/utils/formatters.js';
        
        // Test different currency formats
        const formats = [
            '"$" #,##0.00',
            '"€" #,##0.00', 
            '"£" #,##0.00',
            '"¥" #,##0',
            '"CHF" #,##0.00',
            '"C$" #,##0.00',
            '"A$" #,##0.00',
            '"R$" #,##0.00',
            '#,##0.00 "kr"'
        ];
        
        const testValues = [1234.56, -1234.56, 0, 1000000];
        
        console.log('=== Currency Formatter Tests ===\n');
        
        formats.forEach(format => {
            console.log(`Format: "${format}"`);
            const formatter = createExcelFormatter(format);
            
            testValues.forEach(value => {
                const result = formatter({ value });
                console.log(`  ${value} => ${result}`);
            });
            console.log('');
        });
        
        // Test the actual format being generated
        const testBuildFormat = () => {
            // Simulating the buildFormatString logic
            const currencySymbol = '$';
            const decimalPlaces = 2;
            const baseFormat = decimalPlaces === 0 ? '#,##0' : `#,##0.${'0'.repeat(decimalPlaces)}`;
            
            let formatString;
            if (currencySymbol === 'kr') {
                formatString = `${baseFormat} ${currencySymbol}`;
            } else {
                formatString = `${currencySymbol} ${baseFormat}`;
            }
            
            console.log('Generated format string:', formatString);
            
            const formatter = createExcelFormatter(formatString);
            console.log('Test result:', formatter({ value: 1234.56 }));
        };
        
        console.log('\n=== Format String Generation Test ===');
        testBuildFormat();
    </script>
</head>
<body>
    <h1>Currency Formatter Test</h1>
    <p>Check the browser console for test results.</p>
</body>
</html>